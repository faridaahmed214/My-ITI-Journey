<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Spinning Rabbit</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <style>
      body {
        background-color: #f4f4f4;
        text-align: center;
        font-family: sans-serif;
        padding-top: 50px;
        overflow: hidden;
      }

      #hole {
        width: 200px;
        height: 200px;
        margin: 0 auto;
        position: relative;
        z-index: 1;
      }

      #rabbit {
        width: 80px;
        height: 80px;
        position: absolute;
        top: 100px;
        left: 50px;
        cursor: move;
        z-index: 100;
      }
    </style>
  </head>
  <body>
    <img id="hole" src="31.jpg" />
    <img id="rabbit" src="21.jpg" />

    <script>
      $(document).ready(function () {
        var originalWidth = 80;
        $("#rabbit").draggable();
        $("#hole").droppable({
          accept: "#rabbit",
          drop: function (event, ui) {
            var rabbit = ui.draggable;
            var hole = $(this);
            rabbit.draggable("disable");
            rabbit.animate(
              {
                width: 0,
                height: 0,
                opacity: 0,
                top: hole.offset().top + hole.height() / 2,
                left: hole.offset().left + hole.width() / 2,
              },
              {
                duration: 1500,
                step: function (now, fx) {
                  if (fx.prop === "width") {
                    var degree = (originalWidth - now) * 10;

                    $(this).css("transform", "rotate(" + degree + "deg)");
                  }
                },
              },
            );
          },
        });
      });
    </script>
  </body>
</html>
